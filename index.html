<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Monoton&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cantarell:ital,wght@0,400;0,700;1,400;1,700&family=Monoton&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cantarell:ital,wght@0,400;0,700;1,400;1,700&family=Monoton&family=Saira+Condensed:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-light">
<header>
    <div class="presentation">
        <div class="logo" onclick="irALanding()"></div>
        <h1 class="neon">CINE TEATRO</h1>
    </div>
    <div class="slogan">
        <p>A un click de tu sala</p>
    </div>
    <div class="buttons" id="buttons-header">
        <button class="signin-btn" onclick="mostrarPorfileButtons()">SIGN IN</button>
        <button class="signin-btn">SIGN UP</button>
    </div>
    <div class="profile-buttons" id="profile-header" style="display: none">
        <button class="signin-btn">LANDING</button>
        <button class="signin-btn" onclick="irAProfile()">PROFILE</button>
        <div class="avatar-container"></div>
    </div>
</header>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-18 carousel-actions-container">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner rounded mx-auto">
                    <div class="carousel-item active">
                        <img src="img/image01.jpg" class="d-block carousel-image" alt="Imagen 1" data-class-name="joker-description" data-video-id="t433PEQGErc" data-language="Idioma: Español" data-subtitles="Sin Sub">
                    </div>
                    <div class="carousel-item">
                        <img src="img/image02.jpg" class="d-block carousel-image" alt="Imagen 2" data-class-name="killbill-description" data-video-id="7kSuas6mRpk" data-language="Idioma: Inglés" data-subtitles="Sub: Español">
                    </div>
                    <div class="carousel-item">
                        <img src="img/image03.jpg" class="d-block carousel-image" alt="Imagen 3" data-class-name="fighter-description" data-video-id="lAVYll_wBeY" data-language="Idioma: Francés" data-subtitles="Sub: Español">
                        <div class="overlay-button">
                            <button class="btn btn-dark btn-circle">HOY</button>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <div class="mt-3 carousel-actions">
                <button class="btn btn-secondary">LISTADO</button>
                <button class="btn btn-secondary active">CARRUSEL</button>
                <button class="btn btn-warning">★</button>
            </div>

            <div class="position-absolute sub-language-container">
                <button class="btn btn-light" id="languageButton">idioma</button>
                <button class="btn btn-light" id="subtitlesButton">subtítulos</button>
            </div>
            <div id="floating-container">
                <button class="signin-btn comprar" onclick="comprar()">COMPRAR</button>
            </div>
        </div>
    </div>
</div>
<!--<div class="theme-switch">-->
<!--    <label for="themeToggle">Dark Mode</label>-->
<!--    <input type="checkbox" id="themeToggle">-->
<!--</div>-->
<script src="script.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    let isVideoPlaying = false;
    // document.getElementById('themeToggle').addEventListener('change', function(event) {
    //     if (event.target.checked) {
    //         document.body.classList.remove('theme-light');
    //         document.body.classList.add('theme-dark');
    //     } else {
    //         document.body.classList.remove('theme-dark');
    //         document.body.classList.add('theme-light');
    //     }
    // });

    function comprar() {
        window.location.href = 'compra.html';
    }

    function irALanding() {
        window.location.href = 'index.html';
    }

    function irAProfile() {
        window.location.href = 'profile.html';
    }

    document.querySelectorAll('.carousel-item img').forEach(image => {
        image.addEventListener('click', function() {
            const videoId = this.getAttribute('data-video-id');
            const iframe = document.createElement('iframe');
            iframe.width = this.width;
            iframe.height = this.height;
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&controls=0&modestbranding=1&showinfo=0&rel=0`;
            iframe.frameBorder = '0';
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            iframe.allowFullscreen = true;

            const carouselItem = this.parentNode;
            carouselItem.innerHTML = '';
            carouselItem.appendChild(iframe);


            const floatingContainer = document.getElementById('floating-container');

            floatingContainer.style.display = 'block';
            const floatingClass = this.getAttribute('data-class-name');
            floatingContainer.classList.add(floatingClass);

            document.getElementById('carouselExampleIndicators').classList.add('paused');
            isVideoPlaying = true;

            const handleEscape = function(event) {
                if (event.key === 'Escape') {
                    iframe.remove();
                    carouselItem.innerHTML = `<img src="${image.src}" class="d-block carousel-image" alt="${image.alt}" data-class-name="${image.getAttribute('data-class-name')}" data-video-id="${videoId}" data-language="${image.getAttribute('data-language')}" data-subtitles="${image.getAttribute('data-subtitles')}">`;

                    floatingContainer.style.display = 'none';
                    floatingContainer.classList.remove(floatingClass);

                    document.removeEventListener('keydown', handleEscape);
                    document.getElementById('carouselExampleIndicators').classList.remove('paused');
                    isVideoPlaying = false;
                }
            };

            document.addEventListener('keydown', handleEscape);
        });
    });

    document.getElementById('carouselExampleIndicators').addEventListener('slide.bs.carousel', function(event) {
        if (isVideoPlaying) {
            event.preventDefault(); // Prevent sliding if a video is playing
        }
    });

    const initialLanguage = document.querySelector('.carousel-item.active img').getAttribute('data-language');
    const initialSubtitles = document.querySelector('.carousel-item.active img').getAttribute('data-subtitles');
    document.getElementById('languageButton').textContent = initialLanguage;
    document.getElementById('subtitlesButton').textContent = initialSubtitles;
</script>
</body>
</html>
